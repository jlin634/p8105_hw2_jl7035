P8105_hw2_jl7035
================
Jeffrey Lin
2024-10-02

# Load Necessary Libraries

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.5
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.1
    ## ✔ ggplot2   3.5.1     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.3     ✔ tidyr     1.3.1
    ## ✔ purrr     1.0.2     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

# Problem 1

## Load Transit Data

``` r
NYC_Transit_df <- read_csv(
  "Local_Data_Files/NYC_Transit_Subway_Entrance_And_Exit_Data.csv")
```

    ## Rows: 1868 Columns: 32
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (22): Division, Line, Station Name, Route1, Route2, Route3, Route4, Rout...
    ## dbl  (8): Station Latitude, Station Longitude, Route8, Route9, Route10, Rout...
    ## lgl  (2): ADA, Free Crossover
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
NYC_Transit_df <- 
  NYC_Transit_df %>%
  janitor::clean_names()
  

head(NYC_Transit_df)
```

    ## # A tibble: 6 × 32
    ##   division line    station_name station_latitude station_longitude route1 route2
    ##   <chr>    <chr>   <chr>                   <dbl>             <dbl> <chr>  <chr> 
    ## 1 BMT      4 Aven… 25th St                  40.7             -74.0 R      <NA>  
    ## 2 BMT      4 Aven… 25th St                  40.7             -74.0 R      <NA>  
    ## 3 BMT      4 Aven… 36th St                  40.7             -74.0 N      R     
    ## 4 BMT      4 Aven… 36th St                  40.7             -74.0 N      R     
    ## 5 BMT      4 Aven… 36th St                  40.7             -74.0 N      R     
    ## 6 BMT      4 Aven… 45th St                  40.6             -74.0 R      <NA>  
    ## # ℹ 25 more variables: route3 <chr>, route4 <chr>, route5 <chr>, route6 <chr>,
    ## #   route7 <chr>, route8 <dbl>, route9 <dbl>, route10 <dbl>, route11 <dbl>,
    ## #   entrance_type <chr>, entry <chr>, exit_only <chr>, vending <chr>,
    ## #   staffing <chr>, staff_hours <chr>, ada <lgl>, ada_notes <chr>,
    ## #   free_crossover <lgl>, north_south_street <chr>, east_west_street <chr>,
    ## #   corner <chr>, entrance_latitude <dbl>, entrance_longitude <dbl>,
    ## #   station_location <chr>, entrance_location <chr>

## Inspect Characteristics of the Data Frame

``` r
nrows_NYC <- nrow(NYC_Transit_df)
nrows_NYC
```

    ## [1] 1868

``` r
ncols_NYC <- ncol(NYC_Transit_df)
ncols_NYC
```

    ## [1] 32

``` r
col_names_NYC <- colnames(NYC_Transit_df)
col_names_NYC
```

    ##  [1] "division"           "line"               "station_name"      
    ##  [4] "station_latitude"   "station_longitude"  "route1"            
    ##  [7] "route2"             "route3"             "route4"            
    ## [10] "route5"             "route6"             "route7"            
    ## [13] "route8"             "route9"             "route10"           
    ## [16] "route11"            "entrance_type"      "entry"             
    ## [19] "exit_only"          "vending"            "staffing"          
    ## [22] "staff_hours"        "ada"                "ada_notes"         
    ## [25] "free_crossover"     "north_south_street" "east_west_street"  
    ## [28] "corner"             "entrance_latitude"  "entrance_longitude"
    ## [31] "station_location"   "entrance_location"

## Selecting the Relevant Columns in the Data Set

``` r
NYC_Transit_df <- NYC_Transit_df %>%
  select(line, station_name, station_latitude, station_longitude,
         route1:route11, entry, vending, entrance_type, ada)

head(NYC_Transit_df)
```

    ## # A tibble: 6 × 19
    ##   line     station_name station_latitude station_longitude route1 route2 route3
    ##   <chr>    <chr>                   <dbl>             <dbl> <chr>  <chr>  <chr> 
    ## 1 4 Avenue 25th St                  40.7             -74.0 R      <NA>   <NA>  
    ## 2 4 Avenue 25th St                  40.7             -74.0 R      <NA>   <NA>  
    ## 3 4 Avenue 36th St                  40.7             -74.0 N      R      <NA>  
    ## 4 4 Avenue 36th St                  40.7             -74.0 N      R      <NA>  
    ## 5 4 Avenue 36th St                  40.7             -74.0 N      R      <NA>  
    ## 6 4 Avenue 45th St                  40.6             -74.0 R      <NA>   <NA>  
    ## # ℹ 12 more variables: route4 <chr>, route5 <chr>, route6 <chr>, route7 <chr>,
    ## #   route8 <dbl>, route9 <dbl>, route10 <dbl>, route11 <dbl>, entry <chr>,
    ## #   vending <chr>, entrance_type <chr>, ada <lgl>

``` r
NYC_Transit_df <- NYC_Transit_df %>% 
  mutate(across(route8:route11, as.character))
         
head(NYC_Transit_df)
```

    ## # A tibble: 6 × 19
    ##   line     station_name station_latitude station_longitude route1 route2 route3
    ##   <chr>    <chr>                   <dbl>             <dbl> <chr>  <chr>  <chr> 
    ## 1 4 Avenue 25th St                  40.7             -74.0 R      <NA>   <NA>  
    ## 2 4 Avenue 25th St                  40.7             -74.0 R      <NA>   <NA>  
    ## 3 4 Avenue 36th St                  40.7             -74.0 N      R      <NA>  
    ## 4 4 Avenue 36th St                  40.7             -74.0 N      R      <NA>  
    ## 5 4 Avenue 36th St                  40.7             -74.0 N      R      <NA>  
    ## 6 4 Avenue 45th St                  40.6             -74.0 R      <NA>   <NA>  
    ## # ℹ 12 more variables: route4 <chr>, route5 <chr>, route6 <chr>, route7 <chr>,
    ## #   route8 <chr>, route9 <chr>, route10 <chr>, route11 <chr>, entry <chr>,
    ## #   vending <chr>, entrance_type <chr>, ada <lgl>

This dataset contains various information regarding NYC transit. In it’s
current format, after doing a few steps of cleaning, the dimensions of
the dataset are 1868, 19. The current variables of interest, based on
the columns that have been selected are as follows: line, station_name,
station_latitude, station_longitude, route1, route2, route3, route4,
route5, route6, route7, route8, route9, route10, route11, entry,
vending, entrance_type, ada. They broadly cover the location of
stations, as well as the trains that come through each station, and each
respective station’s accessibility. In order to clean this dataset, I
first read in the data into a dataframe and inspected it with head(), as
well as looked at its dimensions and column names. Afterwards, I
selected the instructed columns and once again inspected it through
head. There, I noticed that not all route columns were standardized to
char type, so I did such. After all these steps, I would still not say
this data is tidy. I see some potential issues with how the route data
is being represented. Looking at it, I wonder if it would be better to
condense the data into two columns: (1) The route number, (2) the train
on that route. This way, we could avoid large amounts of NA values for
route numbers that simply don’t exist for certain stations.

## Determine number of distinct stations

``` r
NYC_Transit_df <- NYC_Transit_df %>%
  distinct(line, station_name, .keep_all =  TRUE)
```

There are 465 distinct stations in NYC.

## Determine number of ADA Compliant Stations

``` r
NYC_Transit_df <- NYC_Transit_df %>% 
  filter(ada = TRUE)
```

There are 465 ADA compliant stations.

## Determine proportion of station entrances/exits which allow entrance but do not have vending machines

``` r
Prop_Allow_Entrance <- NYC_Transit_df %>% 
  filter(vending =="NO", .keep_all = TRUE) %>%
  pull(entry) %>% 
  case_match("YES" ~ 1, 
             "NO" ~0
  ) %>%
  mean()
```

The proportion of station entrances/exists without vending machines,
that allow entrances is 0.5555556

## Reformat data so that route number and route name are distinct variables

``` r
NYC_Transit_df <- NYC_Transit_df %>% 
  pivot_longer(
    route1:route11,
    names_to = "route_number",
    values_to = "route_name"
  )

head(NYC_Transit_df)
```

    ## # A tibble: 6 × 10
    ##   line     station_name station_latitude station_longitude entry vending
    ##   <chr>    <chr>                   <dbl>             <dbl> <chr> <chr>  
    ## 1 4 Avenue 25th St                  40.7             -74.0 YES   YES    
    ## 2 4 Avenue 25th St                  40.7             -74.0 YES   YES    
    ## 3 4 Avenue 25th St                  40.7             -74.0 YES   YES    
    ## 4 4 Avenue 25th St                  40.7             -74.0 YES   YES    
    ## 5 4 Avenue 25th St                  40.7             -74.0 YES   YES    
    ## 6 4 Avenue 25th St                  40.7             -74.0 YES   YES    
    ## # ℹ 4 more variables: entrance_type <chr>, ada <lgl>, route_number <chr>,
    ## #   route_name <chr>

## Determine number of distinct stations serving the A train

``` r
Serve_A <- NYC_Transit_df %>% 
  filter(route_name == "A") %>%
  select(line, station_name) %>%
  distinct()
```

There are 60 unique stations serving the A train.

## Determine how many of the stations serving the A train are ADA Compliant

``` r
Station_A_compl <- NYC_Transit_df %>% 
  filter(route_name == "A", ada = TRUE) %>%
  distinct(line, station_name)
```

There are 60 stations which serve the A train and are ADA Compliant.

# Problem 2

# Problem 3
