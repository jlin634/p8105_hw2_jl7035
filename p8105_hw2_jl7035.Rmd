---
title: "P8105_hw2_jl7035"
author: "Jeffrey Lin"
date: "2024-10-02"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


# Load Necessary Libraries
```{r}
library(tidyverse)
```

# Problem 1

## Load Transit Data
```{r}
NYC_Transit_df <- read_csv(
  "Local_Data_Files/NYC_Transit_Subway_Entrance_And_Exit_Data.csv")

NYC_Transit_df <- 
  NYC_Transit_df %>%
  janitor::clean_names()
  

head(NYC_Transit_df)

```

## Inspect Characteristics of the Data Frame
```{r}
nrows_NYC <- nrow(NYC_Transit_df)
nrows_NYC

ncols_NYC <- ncol(NYC_Transit_df)
ncols_NYC

col_names_NYC <- colnames(NYC_Transit_df)
col_names_NYC

```
## Selecting the Relevant Columns in the Data Set
```{r}
NYC_Transit_df <- NYC_Transit_df %>%
  select(line, station_name, station_latitude, station_longitude,
         route1:route11, entry, vending, entrance_type, ada)

head(NYC_Transit_df)

NYC_Transit_df <- NYC_Transit_df %>% 
  mutate(across(route8:route11, as.character))
         
head(NYC_Transit_df)
         
```

This dataset contains various information regarding NYC transit. In it's 
current format, after doing a few steps of cleaning, the dimensions of the 
dataset are `r dim(NYC_Transit_df)`. The current variables of interest, based 
on the columns that have been selected are as follows: 
`r colnames(NYC_Transit_df)`. They broadly cover the location of stations, 
as well as the trains that come through each station, and each respective 
station's accessibility. In order to clean this dataset, I first read in the 
data into a dataframe and inspected it with head(), as well as looked at its 
dimensions and column names. Afterwards, I selected the instructed columns and 
once again inspected it through head. There, I noticed that not all route 
columns were standardized to char type, so I did such. After all these steps,
I would still not say this data is tidy. I see some potential issues with 
how the route data is being represented. Looking at it, I wonder if it would 
be better to condense the data into two columns: (1) The route number, (2)
the train on that route. This way, we could avoid large amounts of NA values 
for route numbers that simply don't exist for certain stations.

## Determine number of distinct stations
```{r}
NYC_Transit_df <- NYC_Transit_df %>%
  distinct(line, station_name, .keep_all =  TRUE)

```
There are `r nrow(NYC_Transit_df)` distinct stations in NYC.


## Determine number of ADA Compliant Stations
```{r}
NYC_Transit_df <- NYC_Transit_df %>% 
  filter(ada = TRUE)

```
There are `r nrow(NYC_Transit_df)` ADA compliant stations.


## What proportion of station entrances / exits without vending allow entrance?
```{r}
Prop_Allow_Entrance <- NYC_Transit_df %>% 
  filter(vending =="NO", .keep_all = TRUE) %>%
  pull(entry) %>% 
  case_match("YES" ~ 1, 
             "NO" ~0
  ) %>%
  mean()
  


```
The proportion of station entrances/exists without vending machines, that allow
entrances is `r Prop_Allow_Entrance`

## Reformat data so that route number and route name are distinct variables
```{r}
NYC_Transit_df <- NYC_Transit_df %>% 
  pivot_longer(
    route1:route11,
    names_to = "route_number",
    values_to = "route_name"
  )

head(NYC_Transit_df)
```



## Determine number of distinct stations serving the A train
```{r}
Serve_A <- NYC_Transit_df %>% 
  filter(route_name == "A") %>%
  select(line, station_name) %>%
  distinct()

```
There are `r nrow(Serve_A)` unique stations serving the A train.

## Determine how many of the stations serving the A train are ADA Compliant
```{r}
Station_A_compl <- NYC_Transit_df %>% 
  filter(route_name == "A", ada = TRUE) %>%
  distinct(line, station_name)


```
There are `r nrow(Station_A_compl)` stations which serve the A train and are 
ADA Compliant.





# Problem 2

## Read in Mr. Trash Wheel Data
```{r}
Mr_Trash_Wheel_df <- 
  readxl::read_excel("Local_Data_Files/202409 Trash Wheel Collection Data.xlsx",
  sheet = "Mr. Trash Wheel", 
  skip = 1,
  na = c("NA", ".", ""),
  range = "A2:N653"
  ) %>% 
  janitor::clean_names()

head(Mr_Trash_Wheel_df)

```



## Round sports ball to nearest integer and convert type to integer
```{r}
Mr_Trash_Wheel_df <- Mr_Trash_Wheel_df %>% 
  mutate(sports_balls = as.integer(round(sports_balls))) 

```

## Read in 


# Problem 3


```{r}

```

